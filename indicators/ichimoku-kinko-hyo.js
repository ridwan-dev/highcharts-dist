/*
 Highstock JS v8.2.0 (2020-10-07)

 Indicator series type for Highstock

 (c) 2010-2019 Sebastian Bochan

 License: www.highcharts.com/license
*/
(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/indicators/ichimoku-kinko-hyo",["highcharts","highcharts/modules/stock"],function(r){a(r);a.Highcharts=r;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function r(a,n,w,g){a.hasOwnProperty(n)||(a[n]=g.apply(null,w))}a=a?a._modules:{};r(a,"Mixins/IndicatorRequired.js",[a["Core/Utilities.js"]],function(a){var n=a.error;return{isParentLoaded:function(a,
g,r,p,u){if(a)return p?p(a):!0;n(u||this.generateMessage(r,g));return!1},generateMessage:function(a,g){return'Error: "'+a+'" indicator type requires "'+g+'" indicator loaded before. Please read docs: https://api.highcharts.com/highstock/plotOptions.'+a}}});r(a,"Stock/Indicators/SMAIndicator.js",[a["Core/Series/Series.js"],a["Core/Globals.js"],a["Mixins/IndicatorRequired.js"],a["Core/Utilities.js"]],function(a,r,w,g){var n=a.seriesTypes,p=g.addEvent,u=g.error,E=g.extend,F=g.isArray,D=g.pick,v=g.splat,
B=r.Series,A=n.ohlc.prototype,C=w.generateMessage;p(r.Series,"init",function(h){h=h.options;h.useOhlcData&&"highcharts-navigator-series"!==h.id&&E(this,{pointValKey:A.pointValKey,keys:A.keys,pointArrayMap:A.pointArrayMap,toYData:A.toYData})});p(B,"afterSetOptions",function(h){h=h.options;var a=h.dataGrouping;a&&h.useOhlcData&&"highcharts-navigator-series"!==h.id&&(a.approximation="ohlc")});a.seriesType("sma","line",{name:void 0,tooltip:{valueDecimals:4},linkedTo:void 0,compareToMain:!1,params:{index:0,
period:14}},{processData:function(){var a=this.options.compareToMain,e=this.linkedParent;B.prototype.processData.apply(this,arguments);e&&e.compareValue&&a&&(this.compareValue=e.compareValue)},bindTo:{series:!0,eventName:"updatedData"},hasDerivedData:!0,useCommonDataGrouping:!0,nameComponents:["period"],nameSuffixes:[],calculateOn:"init",requiredIndicators:[],requireIndicators:function(){var a={allLoaded:!0};this.requiredIndicators.forEach(function(h){n[h]?n[h].prototype.requireIndicators():(a.allLoaded=
!1,a.needed=h)});return a},init:function(a,e){function b(){var b=c.points||[],t=(c.xData||[]).length,a=c.getValues(c.linkedParent,c.options.params)||{values:[],xData:[],yData:[]},f=[],h=!0;if(t&&!c.hasGroupedData&&c.visible&&c.points)if(c.cropped){if(c.xAxis){var d=c.xAxis.min;var e=c.xAxis.max}t=c.cropData(a.xData,a.yData,d,e);for(d=0;d<t.xData.length;d++)f.push([t.xData[d]].concat(v(t.yData[d])));t=a.xData.indexOf(c.xData[0]);d=a.xData.indexOf(c.xData[c.xData.length-1]);-1===t&&d===a.xData.length-
2&&f[0][0]===b[0].x&&f.shift();c.updateData(f)}else a.xData.length!==t-1&&a.xData.length!==t+1&&(h=!1,c.updateData(a.values));h&&(c.xData=a.xData,c.yData=a.yData,c.options.data=a.values);!1===c.bindTo.series&&(delete c.processedXData,c.isDirty=!0,c.redraw());c.isDirtyData=!1}var c=this,t=c.requireIndicators();if(!t.allLoaded)return u(C(c.type,t.needed));B.prototype.init.call(c,a,e);a.linkSeries();c.dataEventsToUnbind=[];if(!c.linkedParent)return u("Series "+c.options.linkedTo+" not found! Check `linkedTo`.",
!1,a);c.dataEventsToUnbind.push(p(c.bindTo.series?c.linkedParent:c.linkedParent.xAxis,c.bindTo.eventName,b));if("init"===c.calculateOn)b();else var f=p(c.chart,c.calculateOn,function(){b();f()});return c},getName:function(){var a=this.name,e=[];a||((this.nameComponents||[]).forEach(function(b,c){e.push(this.options.params[b]+D(this.nameSuffixes[c],""))},this),a=(this.nameBase||this.type.toUpperCase())+(this.nameComponents?" ("+e.join(", ")+")":""));return a},getValues:function(a,e){var b=e.period,
c=a.xData;a=a.yData;var t=a.length,f=0,h=0,z=[],g=[],l=[],q=-1;if(!(c.length<b)){for(F(a[0])&&(q=e.index?e.index:0);f<b-1;)h+=0>q?a[f]:a[f][q],f++;for(e=f;e<t;e++){h+=0>q?a[e]:a[e][q];var d=[c[e],h/b];z.push(d);g.push(d[0]);l.push(d[1]);h-=0>q?a[e-f]:a[e-f][q]}return{values:z,xData:g,yData:l}}},destroy:function(){this.dataEventsToUnbind.forEach(function(a){a()});B.prototype.destroy.apply(this,arguments)}});""});r(a,"Stock/Indicators/IKHIndicator.js",[a["Core/Series/Series.js"],a["Core/Color/Color.js"],
a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,r,w,g){function n(b){return b.reduce(function(c,b){return Math.max(c,b[1])},-Infinity)}function p(b){return b.reduce(function(c,b){return Math.min(c,b[2])},Infinity)}function u(b){return{high:n(b),low:p(b)}}function E(b){var c,a,f,e,z;b.series.forEach(function(b){if(b.xData)for(e=b.xData,z=a=b.xIncrement?1:e.length-1;0<z;z--)if(f=e[z]-e[z-1],"undefined"===typeof c||f<c)c=f});return c}function F(b,c,a,f){if(b&&c&&a&&f){var t=c.plotX-b.plotX;c=
c.plotY-b.plotY;var e=f.plotX-a.plotX;f=f.plotY-a.plotY;var h=b.plotX-a.plotX,l=b.plotY-a.plotY;a=(-c*h+t*l)/(-e*c+t*f);e=(e*l-f*h)/(-e*c+t*f);if(0<=a&&1>=a&&0<=e&&1>=e)return{plotX:b.plotX+e*t,plotY:b.plotY+e*c}}return!1}function D(b){var c=b.indicator;c.points=b.points;c.nextPoints=b.nextPoints;c.color=b.color;c.options=C(b.options.senkouSpan.styles,b.gap);c.graph=b.graph;c.fillGraph=!0;e.prototype.drawGraph.call(c)}var v=r.parse,B=g.defined,A=g.isArray,C=g.merge,h=g.objectEach,e=a.seriesTypes.sma;
w.approximations["ichimoku-averages"]=function(){var b=[],c;[].forEach.call(arguments,function(a,e){b.push(w.approximations.average(a));c=!c&&"undefined"===typeof b[e]});return c?void 0:b};a.seriesType("ikh","sma",{params:{period:26,periodTenkan:9,periodSenkouSpanB:52},marker:{enabled:!1},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> <b> {series.name}</b><br/>TENKAN SEN: {point.tenkanSen:.3f}<br/>KIJUN SEN: {point.kijunSen:.3f}<br/>CHIKOU SPAN: {point.chikouSpan:.3f}<br/>SENKOU SPAN A: {point.senkouSpanA:.3f}<br/>SENKOU SPAN B: {point.senkouSpanB:.3f}<br/>'},
tenkanLine:{styles:{lineWidth:1,lineColor:void 0}},kijunLine:{styles:{lineWidth:1,lineColor:void 0}},chikouLine:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanA:{styles:{lineWidth:1,lineColor:void 0}},senkouSpanB:{styles:{lineWidth:1,lineColor:void 0}},senkouSpan:{styles:{fill:"rgba(255, 0, 0, 0.5)"}},dataGrouping:{approximation:"ichimoku-averages"}},{pointArrayMap:["tenkanSen","kijunSen","chikouSpan","senkouSpanA","senkouSpanB"],pointValKey:"tenkanSen",nameComponents:["periodSenkouSpanB","period",
"periodTenkan"],init:function(){e.prototype.init.apply(this,arguments);this.options=C({tenkanLine:{styles:{lineColor:this.color}},kijunLine:{styles:{lineColor:this.color}},chikouLine:{styles:{lineColor:this.color}},senkouSpanA:{styles:{lineColor:this.color,fill:v(this.color).setOpacity(.5).get()}},senkouSpanB:{styles:{lineColor:this.color,fill:v(this.color).setOpacity(.5).get()}},senkouSpan:{styles:{fill:v(this.color).setOpacity(.2).get()}}},this.options)},toYData:function(b){return[b.tenkanSen,b.kijunSen,
b.chikouSpan,b.senkouSpanA,b.senkouSpanB]},translate:function(){var b=this;e.prototype.translate.apply(b);b.points.forEach(function(c){b.pointArrayMap.forEach(function(a){B(c[a])&&(c["plot"+a]=b.yAxis.toPixels(c[a],!0),c.plotY=c["plot"+a],c.tooltipPos=[c.plotX,c["plot"+a]],c.isNull=!1)})})},drawGraph:function(){var b=this,c=b.points,a=c.length,f=b.options,g=b.graph,z=b.color,r={options:{gapSize:f.gapSize}},l=b.pointArrayMap.length,q=[[],[],[],[],[],[]],d={tenkanLine:q[0],kijunLine:q[1],chikouLine:q[2],
senkouSpanA:q[3],senkouSpanB:q[4],senkouSpan:q[5]},n=[],k=b.options.senkouSpan,G=k.color||k.styles.fill,p=k.negativeColor,x=[[],[]],u=[[],[]],w=0,y,A,v;for(b.ikhMap=d;a--;){var m=c[a];for(y=0;y<l;y++)k=b.pointArrayMap[y],B(m[k])&&q[y].push({plotX:m.plotX,plotY:m["plot"+k],isNull:!1});p&&a!==c.length-1&&(k=d.senkouSpanB.length-1,m=F(d.senkouSpanA[k-1],d.senkouSpanA[k],d.senkouSpanB[k-1],d.senkouSpanB[k]),y={plotX:m.plotX,plotY:m.plotY,isNull:!1,intersectPoint:!0},m&&(d.senkouSpanA.splice(k,0,y),d.senkouSpanB.splice(k,
0,y),n.push(k)))}h(d,function(a,c){f[c]&&"senkouSpan"!==c&&(b.points=q[w],b.options=C(f[c].styles,r),b.graph=b["graph"+c],b.fillGraph=!1,b.color=z,e.prototype.drawGraph.call(b),b["graph"+c]=b.graph);w++});b.graphCollection&&b.graphCollection.forEach(function(a){b[a].destroy();delete b[a]});b.graphCollection=[];if(p&&d.senkouSpanA[0]&&d.senkouSpanB[0]){n.unshift(0);n.push(d.senkouSpanA.length-1);for(l=0;l<n.length-1;l++){k=n[l];m=n[l+1];a=d.senkouSpanB.slice(k,m+1);k=d.senkouSpanA.slice(k,m+1);if(1<=
Math.floor(a.length/2))if(m=Math.floor(a.length/2),a[m].plotY===k[m].plotY){for(v=y=m=0;v<a.length;v++)m+=a[v].plotY,y+=k[v].plotY;m=m>y?0:1}else m=a[m].plotY>k[m].plotY?0:1;else m=a[0].plotY>k[0].plotY?0:1;x[m]=x[m].concat(a);u[m]=u[m].concat(k)}["graphsenkouSpanColor","graphsenkouSpanNegativeColor"].forEach(function(a,c){x[c].length&&u[c].length&&(A=0===c?G:p,D({indicator:b,points:x[c],nextPoints:u[c],color:A,options:f,gap:r,graph:b[a]}),b[a]=b.graph,b.graphCollection.push(a))})}else D({indicator:b,
points:d.senkouSpanB,nextPoints:d.senkouSpanA,color:G,options:f,gap:r,graph:b.graphsenkouSpan}),b.graphsenkouSpan=b.graph;delete b.nextPoints;delete b.fillGraph;b.points=c;b.options=f;b.graph=g},getGraphPath:function(a){var c=[],b;a=a||this.points;if(this.fillGraph&&this.nextPoints){if((b=e.prototype.getGraphPath.call(this,this.nextPoints))&&b.length){b[0][0]="L";c=e.prototype.getGraphPath.call(this,a);b=b.slice(0,c.length);for(var f=b.length-1;0<=f;f--)c.push(b[f])}}else c=e.prototype.getGraphPath.apply(this,
arguments);return c},getValues:function(a,c){var b=c.period,e=c.periodTenkan;c=c.periodSenkouSpanB;var h=a.xData,g=a.yData,r=g&&g.length||0;a=E(a.xAxis);var l=[],q=[],d;if(!(h.length<=b)&&A(g[0])&&4===g[0].length){var n=h[0]-b*a;for(d=0;d<b;d++)q.push(n+d*a);for(d=0;d<r;d++){if(d>=e){var k=g.slice(d-e,d);k=u(k);k=(k.high+k.low)/2}if(d>=b){var p=g.slice(d-b,d);p=u(p);p=(p.high+p.low)/2;var v=(k+p)/2}if(d>=c){var x=g.slice(d-c,d);x=u(x);x=(x.high+x.low)/2}n=g[d][3];var w=h[d];"undefined"===typeof l[d]&&
(l[d]=[]);"undefined"===typeof l[d+b]&&(l[d+b]=[]);l[d+b][0]=k;l[d+b][1]=p;l[d+b][2]=void 0;l[d][2]=n;d<=b&&(l[d+b][3]=void 0,l[d+b][4]=void 0);"undefined"===typeof l[d+2*b]&&(l[d+2*b]=[]);l[d+2*b][3]=v;l[d+2*b][4]=x;q.push(w)}for(d=1;d<=b;d++)q.push(w+d*a);return{values:l,xData:q,yData:l}}}});""});r(a,"masters/indicators/ichimoku-kinko-hyo.src.js",[],function(){})});
//# sourceMappingURL=ichimoku-kinko-hyo.js.map