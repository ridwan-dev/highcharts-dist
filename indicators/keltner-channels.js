/*
 Highstock JS v8.2.0 (2020-10-07)

 Indicator series type for Highstock

 (c) 2010-2019 Daniel Studencki

 License: www.highcharts.com/license
*/
(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/indicators/keltner-channels",["highcharts","highcharts/modules/stock"],function(r){a(r);a.Highcharts=r;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function r(a,k,q,e){a.hasOwnProperty(k)||(a[k]=e.apply(null,q))}a=a?a._modules:{};r(a,"Mixins/MultipleLines.js",[a["Core/Globals.js"],a["Core/Utilities.js"]],function(a,k){var q=
k.defined,e=k.error,c=k.merge,h=a.seriesTypes.sma;return{pointArrayMap:["top","bottom"],pointValKey:"top",linesApiNames:["bottomLine"],getTranslatedLinesNames:function(b){var c=[];(this.pointArrayMap||[]).forEach(function(h){h!==b&&c.push("plot"+h.charAt(0).toUpperCase()+h.slice(1))});return c},toYData:function(b){var c=[];(this.pointArrayMap||[]).forEach(function(h){c.push(b[h])});return c},translate:function(){var b=this,c=b.pointArrayMap,a=[],f;a=b.getTranslatedLinesNames();h.prototype.translate.apply(b,
arguments);b.points.forEach(function(h){c.forEach(function(c,e){f=h[c];null!==f&&(h[a[e]]=b.yAxis.toPixels(f,!0))})})},drawGraph:function(){var b=this,a=b.linesApiNames,t=b.points,f=t.length,l=b.options,k=b.graph,n={options:{gapSize:l.gapSize}},p=[],d;b.getTranslatedLinesNames(b.pointValKey).forEach(function(b,c){for(p[c]=[];f--;)d=t[f],p[c].push({x:d.x,plotX:d.plotX,plotY:d[b],isNull:!q(d[b])});f=t.length});a.forEach(function(d,a){p[a]?(b.points=p[a],l[d]?b.options=c(l[d].styles,n):e('Error: "There is no '+
d+' in DOCS options declared. Check if linesApiNames are consistent with your DOCS line names." at mixin/multiple-line.js:34'),b.graph=b["graph"+d],h.prototype.drawGraph.call(b),b["graph"+d]=b.graph):e('Error: "'+d+" doesn't have equivalent in pointArrayMap. To many elements in linesApiNames relative to pointArrayMap.\"")});b.points=t;b.options=l;b.graph=k;h.prototype.drawGraph.call(b)}}});r(a,"Mixins/IndicatorRequired.js",[a["Core/Utilities.js"]],function(a){var k=a.error;return{isParentLoaded:function(a,
e,c,h,b){if(a)return h?h(a):!0;k(b||this.generateMessage(c,e));return!1},generateMessage:function(a,e){return'Error: "'+a+'" indicator type requires "'+e+'" indicator loaded before. Please read docs: https://api.highcharts.com/highstock/plotOptions.'+a}}});r(a,"Stock/Indicators/SMAIndicator.js",[a["Core/Series/Series.js"],a["Core/Globals.js"],a["Mixins/IndicatorRequired.js"],a["Core/Utilities.js"]],function(a,k,q,e){var c=a.seriesTypes,h=e.addEvent,b=e.error,A=e.extend,t=e.isArray,f=e.pick,l=e.splat,
m=k.Series,n=c.ohlc.prototype,p=q.generateMessage;h(k.Series,"init",function(d){d=d.options;d.useOhlcData&&"highcharts-navigator-series"!==d.id&&A(this,{pointValKey:n.pointValKey,keys:n.keys,pointArrayMap:n.pointArrayMap,toYData:n.toYData})});h(m,"afterSetOptions",function(d){d=d.options;var b=d.dataGrouping;b&&d.useOhlcData&&"highcharts-navigator-series"!==d.id&&(b.approximation="ohlc")});a.seriesType("sma","line",{name:void 0,tooltip:{valueDecimals:4},linkedTo:void 0,compareToMain:!1,params:{index:0,
period:14}},{processData:function(){var d=this.options.compareToMain,b=this.linkedParent;m.prototype.processData.apply(this,arguments);b&&b.compareValue&&d&&(this.compareValue=b.compareValue)},bindTo:{series:!0,eventName:"updatedData"},hasDerivedData:!0,useCommonDataGrouping:!0,nameComponents:["period"],nameSuffixes:[],calculateOn:"init",requiredIndicators:[],requireIndicators:function(){var d={allLoaded:!0};this.requiredIndicators.forEach(function(b){c[b]?c[b].prototype.requireIndicators():(d.allLoaded=
!1,d.needed=b)});return d},init:function(d,a){function c(){var d=g.points||[],b=(g.xData||[]).length,c=g.getValues(g.linkedParent,g.options.params)||{values:[],xData:[],yData:[]},a=[],h=!0;if(b&&!g.hasGroupedData&&g.visible&&g.points)if(g.cropped){if(g.xAxis){var f=g.xAxis.min;var e=g.xAxis.max}b=g.cropData(c.xData,c.yData,f,e);for(f=0;f<b.xData.length;f++)a.push([b.xData[f]].concat(l(b.yData[f])));b=c.xData.indexOf(g.xData[0]);f=c.xData.indexOf(g.xData[g.xData.length-1]);-1===b&&f===c.xData.length-
2&&a[0][0]===d[0].x&&a.shift();g.updateData(a)}else c.xData.length!==b-1&&c.xData.length!==b+1&&(h=!1,g.updateData(c.values));h&&(g.xData=c.xData,g.yData=c.yData,g.options.data=c.values);!1===g.bindTo.series&&(delete g.processedXData,g.isDirty=!0,g.redraw());g.isDirtyData=!1}var g=this,f=g.requireIndicators();if(!f.allLoaded)return b(p(g.type,f.needed));m.prototype.init.call(g,d,a);d.linkSeries();g.dataEventsToUnbind=[];if(!g.linkedParent)return b("Series "+g.options.linkedTo+" not found! Check `linkedTo`.",
!1,d);g.dataEventsToUnbind.push(h(g.bindTo.series?g.linkedParent:g.linkedParent.xAxis,g.bindTo.eventName,c));if("init"===g.calculateOn)c();else var e=h(g.chart,g.calculateOn,function(){c();e()});return g},getName:function(){var b=this.name,c=[];b||((this.nameComponents||[]).forEach(function(b,d){c.push(this.options.params[b]+f(this.nameSuffixes[d],""))},this),b=(this.nameBase||this.type.toUpperCase())+(this.nameComponents?" ("+c.join(", ")+")":""));return b},getValues:function(b,c){var d=c.period,
a=b.xData;b=b.yData;var h=b.length,f=0,e=0,l=[],k=[],p=[],m=-1;if(!(a.length<d)){for(t(b[0])&&(m=c.index?c.index:0);f<d-1;)e+=0>m?b[f]:b[f][m],f++;for(c=f;c<h;c++){e+=0>m?b[c]:b[c][m];var n=[a[c],e/d];l.push(n);k.push(n[0]);p.push(n[1]);e-=0>m?b[c-f]:b[c-f][m]}return{values:l,xData:k,yData:p}}},destroy:function(){this.dataEventsToUnbind.forEach(function(b){b()});m.prototype.destroy.apply(this,arguments)}});""});r(a,"Stock/Indicators/ATRIndicator.js",[a["Core/Series/Series.js"],a["Core/Utilities.js"]],
function(a,k){function q(c,a){return Math.max(c[1]-c[2],"undefined"===typeof a?0:Math.abs(c[1]-a[3]),"undefined"===typeof a?0:Math.abs(c[2]-a[3]))}var e=k.isArray;a.seriesType("atr","sma",{params:{period:14}},{getValues:function(c,a){a=a.period;var b=c.xData,h=(c=c.yData)?c.length:0,k=1,f=0,l=0,m=[],n=[],p=[],d;var r=[[b[0],c[0]]];if(!(b.length<=a)&&e(c[0])&&4===c[0].length){for(d=1;d<=h;d++)if(r.push([b[d],c[d]]),a<k){var u=a;var g=b[d-1],z=q(c[d-1],c[d-2]);u=[g,(f*(u-1)+z)/u];f=u[1];m.push(u);n.push(u[0]);
p.push(u[1])}else a===k?(f=l/(d-1),m.push([b[d-1],f]),n.push(b[d-1]),p.push(f)):l+=q(c[d-1],c[d-2]),k++;return{values:m,xData:n,yData:p}}}});""});r(a,"Stock/Indicators/EMAIndicator.js",[a["Core/Series/Series.js"],a["Core/Utilities.js"]],function(a,k){var q=k.correctFloat,e=k.isArray;a.seriesType("ema","sma",{params:{index:3,period:9}},{accumulatePeriodPoints:function(c,a,b){for(var h=0,e=0,f;e<c;)f=0>a?b[e]:b[e][a],h+=f,e++;return h},calculateEma:function(c,a,b,e,k,f,l){c=c[b-1];a=0>f?a[b-1]:a[b-
1][f];e="undefined"===typeof k?l:q(a*e+k*(1-e));return[c,e]},getValues:function(a,h){var b=h.period,c=a.xData,k=(a=a.yData)?a.length:0,f=2/(b+1),l=[],m=[],n=[],p=-1;if(!(k<b)){e(a[0])&&(p=h.index?h.index:0);h=this.accumulatePeriodPoints(b,p,a);for(h/=b;b<k+1;b++){var d=this.calculateEma(c,a,b,f,d,p,h);l.push(d);m.push(d[0]);n.push(d[1]);d=d[1]}return{values:l,xData:m,yData:n}}}});""});r(a,"Stock/Indicators/KeltnerChannelsIndicator.js",[a["Core/Series/Series.js"],a["Mixins/MultipleLines.js"],a["Core/Utilities.js"]],
function(a,k,q){var e=a.seriesTypes,c=q.correctFloat,h=q.merge,b=e.sma,r=e.ema,t=e.atr;a.seriesType("keltnerchannels","sma",{params:{period:20,periodATR:10,multiplierATR:2},bottomLine:{styles:{lineWidth:1,lineColor:void 0}},topLine:{styles:{lineWidth:1,lineColor:void 0}},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span><b> {series.name}</b><br/>Upper Channel: {point.top}<br/>EMA({series.options.params.period}): {point.middle}<br/>Lower Channel: {point.bottom}<br/>'},marker:{enabled:!1},
dataGrouping:{approximation:"averages"},lineWidth:1},h(k,{pointArrayMap:["top","middle","bottom"],pointValKey:"middle",nameBase:"Keltner Channels",nameComponents:["period","periodATR","multiplierATR"],linesApiNames:["topLine","bottomLine"],requiredIndicators:["ema","atr"],init:function(){b.prototype.init.apply(this,arguments);this.options=h({topLine:{styles:{lineColor:this.color}},bottomLine:{styles:{lineColor:this.color}}},this.options)},getValues:function(a,b){var e=b.period,f=b.periodATR,h=b.multiplierATR,
d=a.yData;d=d?d.length:0;var k=[];b=r.prototype.getValues(a,{period:e,index:b.index});var l=t.prototype.getValues(a,{period:f}),g=[],q=[],x;if(!(d<e)){for(x=e;x<=d;x++){var v=b.values[x-e];var w=l.values[x-f];var y=v[0];a=c(v[1]+h*w[1]);w=c(v[1]-h*w[1]);v=v[1];k.push([y,a,v,w]);g.push(y);q.push([a,v,w])}return{values:k,xData:g,yData:q}}}}));""});r(a,"masters/indicators/keltner-channels.src.js",[],function(){})});
//# sourceMappingURL=keltner-channels.js.map